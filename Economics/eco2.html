<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Economics Quiz - Micro & Macro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            min-height: 100vh;
            padding: 20px;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .top-nav-buttons {
            width: 100%;
            max-width: 800px;
            display: flex;
            justify-content: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 0 10px;
        }
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: #3b82f6;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5rem;
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            margin-bottom: 10px;
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .progress-container {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 25px;
            padding: 5px;
            margin: 20px 0;
        }
        .progress-bar {
            background: linear-gradient(90deg, #1e3a8a 0%, #3b82f6 100%);
            height: 20px;
            border-radius: 20px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        .quiz-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.8), 0 0 20px rgba(59, 130, 246, 0.1);
            padding: 40px;
            margin-bottom: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .question-number {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }
        .category-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: auto;
        }
        .category-mcq {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
        }
        .category-odd {
            background: linear-gradient(135deg, #1e3a8a 0%, #60a5fa 100%);
            color: white;
            box-shadow: 0 0 8px rgba(96, 165, 250, 0.4);
        }
        .category-identify {
            background: linear-gradient(135deg, #312e81 0%, #6366f1 100%);
            color: white;
            box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
        }
        .category-correlation {
            background: linear-gradient(135deg, #7c2d12 0%, #ea580c 100%);
            color: white;
            box-shadow: 0 0 8px rgba(234, 88, 12, 0.4);
        }
        .question {
            font-size: 20px;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 30px;
            line-height: 1.4;
        }
        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        .option {
            background: rgba(30, 58, 138, 0.1);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            color: #e2e8f0;
        }
        .option:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }
        .option.selected {
            background: rgba(59, 130, 246, 0.3);
            border-color: #3b82f6;
            color: #ffffff;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        .option-letter {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-size: 14px;
        }
        .selected .option-letter {
            background: linear-gradient(135deg, #2563eb 0%, #60a5fa 100%);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }
        .btn {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        .btn:disabled {
            background: rgba(71, 85, 105, 0.5);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .btn-secondary {
            background: linear-gradient(135deg, #374151 0%, #6b7280 100%);
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
        }
        .btn-secondary:hover {
            background: linear-gradient(135deg, #4b5563 0%, #9ca3af 100%);
            box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4);
        }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
        }
        .start-screen {
            text-align: center;
            padding: 40px 20px;
        }
        .start-screen h2 {
            color: #3b82f6;
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }
        .start-screen p {
            color: #cbd5e1;
            font-size: 18px;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .player-name-section {
            margin: 20px 0;
        }
        .player-name-section input {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid rgba(59, 130, 246, 0.3);
            background: rgba(30, 58, 138, 0.1);
            color: white;
            font-size: 16px;
            margin-bottom: 20px;
            width: 250px;
            text-align: center;
            outline: none;
        }
        .player-name-section input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }
        .start-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .results-screen {
            text-align: center;
            padding: 40px 20px;
        }
        .results-screen h2 {
            color: #3b82f6;
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }
        .score-display {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }
        .score-display h3 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .score-item {
            background: rgba(30, 58, 138, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        .score-item h4 {
            color: #3b82f6;
            font-size: 1.5rem;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(59, 130, 246, 0.3);
        }
        .score-item p {
            color: #cbd5e1;
            font-size: 14px;
            margin: 0;
        }
        .result-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .detailed-results {
            margin-top: 30px;
            text-align: left;
        }
        .detailed-results h3 {
            color: #3b82f6;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }
        .answer-review {
            background: rgba(30, 58, 138, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .answer-review.correct {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }
        .answer-review.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
        .review-question {
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 10px;
        }
        .review-answer {
            color: #cbd5e1;
            margin-bottom: 10px;
        }
        .review-explanation {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 12px;
            margin-top: 10px;
            font-size: 14px;
            color: #93c5fd;
            border-radius: 0 8px 8px 0;
        }
        .status-correct {
            color: #22c55e;
            font-weight: bold;
        }
        .status-incorrect {
            color: #ef4444;
            font-weight: bold;
        }
        .leaderboard-screen {
            text-align: center;
            padding: 40px 20px;
        }
        .leaderboard-screen h2 {
            color: #3b82f6;
            font-size: 2rem;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }
        .leaderboard-entry {
            background: rgba(30, 58, 138, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        .leaderboard-entry:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }
        .leaderboard-entry.current-user {
            background: rgba(34, 197, 94, 0.2);
            border-color: #22c55e;
        }
        .leaderboard-rank {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        .leaderboard-rank.gold {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }
        .leaderboard-rank.silver {
            background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
        }
        .leaderboard-rank.bronze {
            background: linear-gradient(135deg, #92400e 0%, #d97706 100%);
        }
        .leaderboard-info {
            flex-grow: 1;
            margin-left: 20px;
            text-align: left;
        }
        .leaderboard-name {
            color: #e2e8f0;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .leaderboard-details {
            color: #cbd5e1;
            font-size: 14px;
        }
        .leaderboard-score {
            color: #3b82f6;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }
        .no-scores-message {
            color: #cbd5e1;
            font-size: 18px;
            text-align: center;
            padding: 40px;
            background: rgba(30, 58, 138, 0.05);
            border-radius: 12px;
            border: 1px dashed rgba(59, 130, 246, 0.3);
        }
        .leaderboard-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        @media (max-width: 768px) {
            .top-nav-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }
            .container {
                padding: 10px;
            }
            .header h1 {
                font-size: 2rem;
            }
            .quiz-container {
                padding: 25px;
            }
            .question {
                font-size: 18px;
            }
            .option {
                padding: 12px 15px;
                font-size: 14px;
            }
            .quiz-controls {
                flex-direction: column;
                gap: 15px;
            }
            .start-buttons,
            .result-buttons,
            .leaderboard-buttons {
                flex-direction: column;
            }
            .btn {
                width: 200px;
            }
        }
        .hidden {
            display: none;
        }
        /* Animation styles for notifications */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="top-nav-buttons">
        <a href="../../12thhsc/index.html" class="btn btn-secondary">Back to Home</a>
        <a href="../Economics/economics.html" class="btn btn-secondary">Back to Lessons</a>
    </div>

    <div class="container">
        <div class="header">
            <h1>Economics Quiz</h1>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%">
                    <span id="progressText">0 / 30</span>
                </div>
            </div>
        </div>

        <div class="quiz-container page active" id="startScreen">
            <div class="start-screen">
                <h2>Economics Comprehensive Test</h2>
                <p>Microeconomics &amp; Macroeconomics concepts and applications.</p>

                <div class="player-name-section">
                    <label for="playerName" style="color: #3b82f6; font-weight: bold; margin-bottom: 10px; display: block;">Enter Your Name:</label>
                    <input type="text" id="playerName" placeholder="Your name here..." maxlength="20" />
                </div>

                <div class="start-buttons">
                    <button class="btn" onclick="startQuiz()">Start Quiz</button>
                    <button class="btn btn-secondary" onclick="showLeaderboard()">View Leaderboard</button>
                </div>
            </div>
        </div>

        <div class="quiz-container page" id="quizContainer">
            <div class="question-header">
                <div class="question-number" id="questionNumber">Question 1 of 30</div>
                <div class="category-badge" id="categoryBadge">MCQ</div>
            </div>

            <div class="question" id="questionText">
                Loading question...
            </div>

            <div class="options" id="optionsContainer"></div>

            <div class="quiz-controls">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
            </div>
        </div>

        <div class="quiz-container page" id="resultsScreen">
            <div class="results-screen">
                <h2>Quiz Complete!</h2>
                <div class="score-display">
                    <h3 id="finalScore">0/30</h3>
                    <p>Your Performance</p>
                </div>

                <div class="score-breakdown">
                    <div class="score-item">
                        <h4 id="correctCount">0</h4>
                        <p>Correct Answers</p>
                    </div>
                    <div class="score-item">
                        <h4 id="incorrectCount">0</h4>
                        <p>Incorrect Answers</p>
                    </div>
                    <div class="score-item">
                        <h4 id="percentageScore">0%</h4>
                        <p>Percentage</p>
                    </div>
                    <div class="score-item">
                        <h4 id="gradeDisplay">F</h4>
                        <p>Grade</p>
                    </div>
                </div>

                <p id="performanceMessage">Good job on completing the quiz!</p>
                <div class="result-buttons">
                    <button class="btn" onclick="showDetailedResults()">View Detailed Results</button>
                    <button class="btn btn-secondary" onclick="restartQuiz()">Take Quiz Again</button>
                    <button class="btn btn-secondary" onclick="showLeaderboard()">View Leaderboard</button>
                </div>

                <div class="detailed-results hidden" id="detailedResults">
                    <h3>📊 Detailed Answer Review</h3>
                    <div id="answerReviewContainer"></div>
                </div>
            </div>
        </div>

        <div class="quiz-container page" id="leaderboardScreen">
            <div class="leaderboard-screen">
                <h2>🏆 Leaderboard 🏆</h2>
                <div class="leaderboard-container" id="leaderboardContainer"></div>
                <div class="leaderboard-buttons">
                    <button class="btn btn-secondary" onclick="hideLeaderboard()">Back to Quiz</button>
                    <button class="btn btn-danger" onclick="showAdminReset()">🔒 Reset Scores</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz data with your economics questions replaced to utility concept questions
        const quizData = [
            // 12 Enhanced MCQs (Single Correct Answer)
            {
                question: "What is the best description of the term \"utility\" in economics?",
                options: [
                    "The pleasure obtained from consuming goods",
                    "The ability of a commodity to satisfy human wants",
                    "The price at which goods are sold",
                    "The total quantity of goods available"
                ],
                correct: 1,
                category: "mcq",
                explanation: "Utility refers to the ability of a commodity to satisfy human wants, which is the fundamental economic concept behind utility."
            },
            {
                question: "Which of the following statements about utility is true?",
                options: [
                    "Utility remains constant regardless of the person or time",
                    "Utility is a concept without any moral or ethical implication",
                    "Utility and usefulness mean exactly the same thing",
                    "Utility is always measurable objectively and quantitatively"
                ],
                correct: 1,
                category: "mcq",
                explanation: "Utility is a concept that does not involve moral or ethical considerations — it simply relates to satisfaction."
            },
            {
                question: "When the utility of a product increases simply because it is moved to a place where it is needed, what is this type of utility called?",
                options: ["Form utility", "Time utility", "Place utility", "Possession utility"],
                correct: 2,
                category: "mcq",
                explanation: "Place utility is created when goods are moved to locations where they are more useful or needed."
            },
            {
                question: "When a consumer gains increased satisfaction by learning more about a product’s features and benefits, which utility is being referred to?",
                options: ["Service utility", "Knowledge utility", "Possession utility", "Time utility"],
                correct: 1,
                category: "mcq",
                explanation: "Knowledge utility refers to the satisfaction gained from acquiring information about products."
            },
            {
                question: "According to the law of diminishing marginal utility, what happens to the additional satisfaction gained from consuming more units of a commodity?",
                options: [
                    "It increases as more units are consumed",
                    "It remains the same no matter how much is consumed",
                    "It decreases with each additional unit consumed",
                    "It becomes infinite at the point of full satisfaction"
                ],
                correct: 2,
                category: "mcq",
                explanation: "The law states that marginal utility declines with additional consumption of the same commodity."
            },
            {
                question: "Which of these is a critical assumption for the law of diminishing marginal utility to hold true?",
                options: [
                    "Consumers act irrationally in their choices",
                    "Each unit of a commodity is identical in quality and size",
                    "Consumers satisfy multiple wants simultaneously",
                    "Commodities are indivisible and can only be consumed once"
                ],
                correct: 1,
                category: "mcq",
                explanation: "Homogeneity (identical quality/size) of goods is assumed for this law."
            },
            {
                question: "What is ‘disutility’ in the context of consumer behavior?",
                options: [
                    "The total satisfaction derived from all units consumed",
                    "Negative satisfaction or dissatisfaction after consuming too much",
                    "Additional satisfaction from the first unit consumed",
                    "The value of a commodity in the market"
                ],
                correct: 1,
                category: "mcq",
                explanation: "Disutility represents dissatisfaction or negative utility experienced."
            },
            {
                question: "A student finds textbooks highly useful during exams but not during vacations. Which type of utility does this situation illustrate?",
                options: ["Form utility", "Time utility", "Place utility", "Knowledge utility"],
                correct: 1,
                category: "mcq",
                explanation: "Time utility refers to usefulness related to the timing when a good is consumed."
            },
            {
                question: "At the point where marginal utility becomes zero, what is the behavior of total utility?",
                options: [
                    "It reaches its maximum and stops increasing",
                    "It declines sharply",
                    "It becomes negative",
                    "It remains unchanged regardless of consumption"
                ],
                correct: 0,
                category: "mcq",
                explanation: "Total utility reaches a maximum when marginal utility is zero."
            },
            {
                question: "The paradox of value is explained by the law of diminishing marginal utility as to why some goods with high utility may have low market price, and some with low utility have high price. Which of the following illustrates this paradox?",
                options: [
                    "Water has low market value despite its high use",
                    "Diamonds are always cheap regardless of their demand",
                    "Only luxury goods are valuable in use",
                    "Food is priced higher than gold"
                ],
                correct: 0,
                category: "mcq",
                explanation: "Water is essential and has high utility but usually low price; diamonds have low utility but high price."
            },
            {
                question: "If the marginal utility of a product is less than its market price, a rational consumer will usually:",
                options: [
                    "Buy more of that product",
                    "Reduce or stop buying that product",
                    "Continue buying the same quantity without change",
                    "Increase buying even if the price is too high"
                ],
                correct: 1,
                category: "mcq",
                explanation: "Rational consumers will reduce consumption if the utility is less than the price."
            },
            {
                question: "When a person experiences increased satisfaction from each additional unit of money unlike the assumption of diminishing satisfaction, which assumption of the law does this situation violate?",
                options: ["Continuity", "Rationality", "Homogeneity", "Divisibility"],
                correct: 1,
                category: "mcq",
                explanation: "Rationality assumes diminishing satisfaction; violating it means preferences are irrational."
            },

            // 6 Odd One Out
            {
                question: "Identify the odd one out related to the types of utility:",
                options: ["Service utility", "Knowledge utility", "Fashion utility", "Place utility"],
                correct: 2,
                category: "odd",
                explanation: "Fashion utility is not a standard category of utility like the others."
            },
            {
                question: "Which is not a feature of utility?",
                options: ["Subjective nature", "Ethical consideration", "Relative nature", "Multi-purpose usage"],
                correct: 1,
                category: "odd",
                explanation: "Utility is generally considered ethically neutral, thus ethical consideration is not a feature."
            },
            {
                question: "Find the odd one out among utility concepts:",
                options: ["Total utility", "Marginal utility", "Intrinsic utility", "Disutility"],
                correct: 2,
                category: "odd",
                explanation: "Intrinsic utility is not a common classified concept unlike others."
            },
            {
                question: "Which does not describe a marginal utility level?",
                options: ["Positive marginal utility", "Negative marginal utility", "Zero marginal utility", "Constant marginal utility"],
                correct: 3,
                category: "odd",
                explanation: "Marginal utility typically changes and is not constant."
            },
            {
                question: "Pick the exception that does not truly violate the law of diminishing marginal utility:",
                options: ["Addictions", "Hobbies", "Non-divisible goods", "Miser’s increasing satisfaction"],
                correct: 2,
                category: "odd",
                explanation: "Non-divisible goods don't violate the law; the others are exceptions."
            },
            {
                question: "Which of the following is not a basic assumption of the law of diminishing marginal utility?",
                options: ["Rational behavior", "Continuity of consumption", "Price elasticity of demand", "Homogeneity of commodity"],
                correct: 2,
                category: "odd",
                explanation: "Price elasticity is unrelated to the assumptions of diminishing marginal utility."
            },

            // 6 Identify the Term
            {
                question: "What do we call the extra satisfaction from consuming one more unit of a good?",
                options: ["Total utility", "Marginal utility", "Disutility", "Aggregate utility"],
                correct: 1,
                category: "identify",
                explanation: "Marginal utility is the additional satisfaction from one more unit consumed."
            },
            {
                question: "Which type of utility is created when a good is transported to a location where it is needed?",
                options: ["Time utility", "Place utility", "Form utility", "Possession utility"],
                correct: 1,
                category: "identify",
                explanation: "Place utility arises when goods are moved to places where they are needed."
            },
            {
                question: "A utility type that does not consider the ethical or moral value of a commodity is called:",
                options: ["Ethical utility", "Ethically neutral utility", "Subjective utility", "Pleasure utility"],
                correct: 1,
                category: "identify",
                explanation: "Ethically neutral utility ignores moral considerations—it focuses purely on satisfaction."
            },
            {
                question: "The assumption that all units consumed are identical in taste, size, and quality is called:",
                options: ["Rationality", "Homogeneity", "Divisibility", "Continuity"],
                correct: 1,
                category: "identify",
                explanation: "Homogeneity means all units are identical for the law of diminishing marginal utility."
            },
            {
                question: "The point at which additional consumption of a commodity adds no more satisfaction to the consumer is known as:",
                options: ["Point of saturation", "Point of satiety", "Equilibrium point", "Marginal point"],
                correct: 1,
                category: "identify",
                explanation: "Point of satiety is where marginal utility becomes zero."
            },
            {
                question: "What is the term for assigning numerical values to utility, despite it being an abstract concept?",
                options: ["Marginal utility", "Cardinal measurement", "Ordinal measurement", "Quantitative utility"],
                correct: 1,
                category: "identify",
                explanation: "Cardinal measurement tries to assign numerical values to utility."
            },

            // 6 Correlation Questions
            {
                question: "Total utility : Total satisfaction :: Marginal utility :",
                options: [
                    "Satisfaction from last unit",
                    "Total satisfaction",
                    "Consumer concern",
                    "Satisfaction from first unit"
                ],
                correct: 0,
                category: "correlation",
                explanation: "Marginal utility is the satisfaction obtained from the last unit consumed."
            },
            {
                question: "Form utility : Change in product shape :: Place utility :",
                options: [
                    "Change in time",
                    "Change in place",
                    "Change in ownership",
                    "Change in quality"
                ],
                correct: 1,
                category: "correlation",
                explanation: "Place utility refers to the change created by moving goods to a different place."
            },
            {
                question: "Point of satiety : Maximum total utility :: Marginal utility :",
                options: ["Zero", "Maximum", "Positive", "Negative"],
                correct: 0,
                category: "correlation",
                explanation: "At point of satiety, marginal utility is zero."
            },
            {
                question: "Exceptions to the law of diminishing marginal utility include hobbies :: Other exceptions include:",
                options: ["Power", "Addiction", "Miser’s excessive satisfaction", "All of the above"],
                correct: 3,
                category: "correlation",
                explanation: "All listed examples are exceptions to the law."
            },
            {
                question: "Utility is the cause of satisfaction :: Satisfaction is the:",
                options: [
                    "Independent factor",
                    "Unrelated effect",
                    "Resulting effect",
                    "Form of utility"
                ],
                correct: 2,
                category: "correlation",
                explanation: "Satisfaction is the resulting effect of utility."
            },
            {
                question: "When marginal utility is less than price, the consumer will typically:",
                options: [
                    "Buy more",
                    "Buy less or stop buying",
                    "Maintain current consumption",
                    "Buy unlimited quantities"
                ],
                correct: 1,
                category: "correlation",
                explanation: "Consumers reduce or stop buying when marginal utility < price."
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let userAnswers = [];
        let quizStarted = false;
        let quizCompleted = false;
        let currentPlayerName = "";

        // DOM elements
        let startScreen,
            quizContainer,
            resultsScreen,
            leaderboardScreen;
        let progressBar,
            progressText,
            questionNumber,
            categoryBadge,
            questionText,
            optionsContainer;
        let prevBtn,
            nextBtn,
            playerNameInput;

        // Show/hide pages
        function showPage(pageId) {
            document.querySelectorAll(".page").forEach((page) => {
                page.classList.remove("active");
            });
            document.getElementById(pageId).classList.add("active");
        }

        // Admin reset system with secure code
        function showAdminReset() {
            const modalOverlay = document.createElement("div");
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                backdrop-filter: blur(5px);
            `;

            const modal = document.createElement("div");
            modal.style.cssText = `
                background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
                border: 2px solid rgba(239, 68, 68, 0.5);
                border-radius: 20px;
                padding: 30px;
                text-align: center;
                color: white;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.9), inset 0 1px 0 rgba(255, 255, 255, 0.1);
                max-width: 450px;
                width: 90%;
                animation: modalSlideIn 0.3s ease-out;
            `;

            modal.innerHTML = `
                <div style="margin-bottom: 25px;">
                    <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #ef4444, #dc2626);
                                border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                margin: 0 auto 15px auto; font-size: 24px;">🔒</div>
                    <h3 style="color: #ef4444; margin-bottom: 10px; font-size: 1.5rem;">Admin Access Required</h3>
                    <p style="color: #cbd5e1; margin-bottom: 0;">Enter the reset code to clear all leaderboard scores:</p>
                </div>
                
                <div style="margin: 25px 0;">
                    <input type="password" id="resetCode" placeholder="Enter reset code" 
                           style="width: 100%; padding: 15px; border-radius: 10px; border: 2px solid rgba(239, 68, 68, 0.3); 
                                  background: rgba(239, 68, 68, 0.1); color: white; text-align: center; 
                                  font-size: 16px; font-weight: bold; letter-spacing: 2px;">
                    <div id="codeError" style="color: #ef4444; font-size: 14px; margin-top: 10px; display: none;">
                        ❌ Incorrect code. Access denied.
                    </div>
                </div>
                
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="verifyResetCode()" class="btn btn-danger" 
                            style="min-width: 140px; font-weight: bold;">
                        🗑️ Reset Leaderboard
                    </button>
                    <button onclick="closeResetModal()" class="btn btn-secondary" 
                            style="min-width: 100px;">
                        Cancel
                    </button>
                </div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(239, 68, 68, 0.2);">
                    <p style="font-size: 12px; color: #94a3b8; line-height: 1.4;">
                        ⚠️ <strong>Warning:</strong> This action will permanently delete all player scores and cannot be undone!
                    </p>
                </div>
            `;

            // Add modal animation CSS
            const style = document.createElement("style");
            style.textContent = `
                @keyframes modalSlideIn {
                    from { 
                        opacity: 0; 
                        transform: scale(0.7) translateY(-50px); 
                    }
                    to { 
                        opacity: 1; 
                        transform: scale(1) translateY(0); 
                    }
                }
            `;
            document.head.appendChild(style);

            modalOverlay.appendChild(modal);
            document.body.appendChild(modalOverlay);
            window.currentResetModal = modalOverlay;

            const codeInput = document.getElementById("resetCode");
            codeInput.focus();
            codeInput.addEventListener("keypress", function (e) {
                if (e.key === "Enter") {
                    verifyResetCode();
                }
            });

            // Close modal when clicking outside
            modalOverlay.addEventListener("click", function (e) {
                if (e.target === modalOverlay) {
                    closeResetModal();
                }
            });
        }

        function verifyResetCode() {
            const enteredCode = document.getElementById("resetCode").value.trim();
            const correctCode = "TESSA"; // Change this to your desired code
            const errorDiv = document.getElementById("codeError");

            if (enteredCode === correctCode) {
                // Correct code - show final confirmation
                if (
                    confirm(
                        "🚨 FINAL WARNING 🚨\n\nYou are about to permanently delete ALL leaderboard scores!\n\nThis action CANNOT be undone.\n\nClick OK to proceed or Cancel to abort."
                    )
                ) {
                    localStorage.removeItem("economicsQuizLeaderboard");
                    closeResetModal();

                    showNotification("✅ Leaderboard has been reset successfully!", "success");

                    // Refresh leaderboard display if currently viewing it
                    if (document.getElementById("leaderboardScreen").classList.contains("active")) {
                        displayLeaderboard();
                    }
                }
            } else {
                // Wrong code - show error
                errorDiv.style.display = "block";
                document.getElementById("resetCode").value = "";
                document.getElementById("resetCode").focus();

                // Add shake animation to modal
                const modal = window.currentResetModal.querySelector("div");
                modal.style.animation = "shake 0.5s ease-in-out";
                setTimeout(() => {
                    modal.style.animation = "";
                }, 500);
            }
        }

        function closeResetModal() {
            if (window.currentResetModal) {
                window.currentResetModal.style.animation = "fadeOut 0.3s ease-in";
                setTimeout(() => {
                    if (document.body.contains(window.currentResetModal)) {
                        document.body.removeChild(window.currentResetModal);
                    }
                    window.currentResetModal = null;
                }, 300);
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement("div");
            const isSuccess = type === "success";

            notification.style.cssText = `
                position: fixed;
                top: 30px;
                right: 30px;
                padding: 20px 25px;
                border-radius: 12px;
                color: white;
                font-weight: bold;
                font-size: 16px;
                z-index: 1001;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
                background: ${
                  isSuccess
                    ? "linear-gradient(135deg, #22c55e, #16a34a)"
                    : "linear-gradient(135deg, #ef4444, #dc2626)"
                };
                border: 1px solid ${isSuccess ? "#16a34a" : "#dc2626"};
                animation: slideIn 0.4s ease-out;
                max-width: 300px;
                text-align: center;
            `;

            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px; justify-content: center;">
                    <span style="font-size: 20px;">${isSuccess ? "✅" : "❌"}</span>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            // Auto remove after 4 seconds
            setTimeout(() => {
                notification.style.animation = "slideOut 0.4s ease-in";
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 4000);
        }

        // Add shake animation for wrong code
        const shakeStyle = document.createElement("style");
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
            @keyframes fadeOut {
                from { opacity: 1; transform: scale(1); }
                to { opacity: 0; transform: scale(0.8); }
            }
        `;
        document.head.appendChild(shakeStyle);

        // Secret key combination (type "RESET" to trigger admin panel)
        let keySequence = [];
        const secretKeys = ["KeyR", "KeyE", "KeyS", "KeyE", "KeyT"];

        document.addEventListener("keydown", function (e) {
            keySequence.push(e.code);

            if (keySequence.length > secretKeys.length) {
                keySequence.shift();
            }

            if (
                keySequence.length === secretKeys.length &&
                keySequence.every((key, index) => key === secretKeys[index])
            ) {
                showAdminReset();
                keySequence = [];
            }
        });

        // Leaderboard functions
        function saveScore(name, score, percentage, grade, correctAnswers, totalQuestions) {
            const scores = getLeaderboardData();
            const newScore = {
                name: name || "Anonymous",
                score: correctAnswers,
                totalQuestions: totalQuestions,
                percentage: percentage,
                grade: grade,
                date: new Date().toLocaleDateString(),
                timestamp: Date.now(),
            };

            scores.push(newScore);

            // Sort by score descending, then by percentage, then by timestamp (most recent)
            scores.sort((a, b) => {
                if (b.score !== a.score) return b.score - a.score;
                if (b.percentage !== a.percentage) return b.percentage - a.percentage;
                return b.timestamp - a.timestamp;
            });

            // Keep only top 10 scores
            const topScores = scores.slice(0, 10);

            localStorage.setItem("economicsQuizLeaderboard", JSON.stringify(topScores));
            return topScores;
        }

        function getLeaderboardData() {
            const stored = localStorage.getItem("economicsQuizLeaderboard");
            return stored ? JSON.parse(stored) : [];
        }

        function displayLeaderboard() {
            const scores = getLeaderboardData();
            const container = document.getElementById("leaderboardContainer");

            if (scores.length === 0) {
                container.innerHTML = `
                    <div class="no-scores-message">
                        <p>🎯 No scores yet! Be the first to take the quiz and set a record!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = scores
                .map((score, index) => {
                    const rankClass =
                        index === 0
                            ? "gold"
                            : index === 1
                            ? "silver"
                            : index === 2
                            ? "bronze"
                            : "";
                    const isPersonalBest = score.name === currentPlayerName;

                    return `
                    <div class="leaderboard-entry ${isPersonalBest ? "current-user" : ""}">
                        <div class="leaderboard-rank ${rankClass}">
                            ${index + 1}
                        </div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">${score.name}</div>
                            <div class="leaderboard-details">
                                ${score.score}/${score.totalQuestions} correct • ${score.percentage}% • Grade: ${score.grade} • ${score.date}
                            </div>
                        </div>
                        <div class="leaderboard-score">
                            ${score.percentage}%
                        </div>
                    </div>
                `;
                })
                .join("");
        }

        function showLeaderboard() {
            showPage("leaderboardScreen");
            displayLeaderboard();
        }

        function hideLeaderboard() {
            showPage("startScreen");
        }

        // Start the quiz
        function startQuiz() {
            const name = playerNameInput.value.trim();
            if (!name) {
                alert("Please enter your name before starting the quiz!");
                playerNameInput.focus();
                return;
            }

            currentPlayerName = name;
            quizStarted = true;
            userAnswers = new Array(quizData.length).fill(null);
            currentQuestion = 0;

            // Hide start screen and show quiz container
            startScreen.classList.remove("active");
            quizContainer.classList.add("active");

            // Initialize question display
            displayQuestion();

            // Update progress
            progressBar.style.width = "0%";
            progressText.textContent = `1 / ${quizData.length}`;
        }

        // Display current question
        function displayQuestion() {
            if (!quizStarted) return;

            const question = quizData[currentQuestion];
            if (!question) return;

            questionNumber.textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;

            // Set category badge
            const categoryNames = {
                mcq: "MCQ",
                odd: "Odd One Out",
                identify: "Identify the Term",
                correlation: "Correlation",
            };
            categoryBadge.textContent = categoryNames[question.category] || "MCQ";
            categoryBadge.className = `category-badge category-${question.category}`;

            // Set question text
            questionText.innerHTML = question.question;

            // Update progress
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${currentQuestion + 1} / ${quizData.length}`;

            // Display options
            optionsContainer.innerHTML = "";
            question.options.forEach((option, index) => {
                const optionElement = document.createElement("div");
                optionElement.className = "option";
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div>${option}</div>
                `;

                // Check if this option was previously selected
                if (userAnswers[currentQuestion] === index) {
                    optionElement.classList.add("selected");
                }

                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });

            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = userAnswers[currentQuestion] === null;
            nextBtn.textContent = currentQuestion === quizData.length - 1 ? "Finish Quiz" : "Next";
        }

        // Select an option
        function selectOption(selectedIndex) {
            userAnswers[currentQuestion] = selectedIndex;

            // Update visual feedback
            const options = optionsContainer.querySelectorAll(".option");
            options.forEach((option, index) => {
                option.classList.remove("selected");
                if (index === selectedIndex) {
                    option.classList.add("selected");
                }
            });

            // Enable next button
            nextBtn.disabled = false;
        }

        // Go to previous question
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        // Go to next question or finish quiz
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                finishQuiz();
            }
        }

        // Finish the quiz and show results
        function finishQuiz() {
            quizCompleted = true;
            showPage("resultsScreen");
            calculateAndDisplayResults();
        }

        // Calculate score and display results
        function calculateAndDisplayResults() {
            let correctAnswers = 0;
            let incorrectAnswers = 0;

            // Calculate correct answers
            for (let i = 0; i < quizData.length; i++) {
                if (userAnswers[i] === quizData[i].correct) {
                    correctAnswers++;
                } else {
                    incorrectAnswers++;
                }
            }

            const percentage = Math.round((correctAnswers / quizData.length) * 100);

            // Determine grade
            let grade;
            if (percentage >= 90) grade = "A+";
            else if (percentage >= 80) grade = "A";
            else if (percentage >= 70) grade = "B";
            else if (percentage >= 60) grade = "C";
            else if (percentage >= 50) grade = "D";
            else grade = "F";

            // Display results
            document.getElementById("finalScore").textContent = `${correctAnswers}/${quizData.length}`;
            document.getElementById("correctCount").textContent = correctAnswers;
            document.getElementById("incorrectCount").textContent = incorrectAnswers;
            document.getElementById("percentageScore").textContent = `${percentage}%`;
            document.getElementById("gradeDisplay").textContent = grade;

            // Performance message
            let message;
            if (percentage >= 90) {
                message = "🌟 Outstanding! You have excellent knowledge of economics concepts!";
            } else if (percentage >= 80) {
                message = "🎉 Great job! You have a strong understanding of economics!";
            } else if (percentage >= 70) {
                message = "👍 Good work! You have a solid grasp of the material!";
            } else if (percentage >= 60) {
                message = "📚 Fair performance. Consider reviewing the material for better understanding.";
            } else if (percentage >= 50) {
                message = "💪 You passed, but there's room for improvement. Keep studying!";
            } else {
                message = "🔄 Keep practicing! Review the material and try again to improve your score.";
            }

            document.getElementById("performanceMessage").textContent = message;

            // Save score to leaderboard
            saveScore(currentPlayerName, correctAnswers, percentage, grade, correctAnswers, quizData.length);

            // Update progress bar to 100%
            progressBar.style.width = "100%";
            progressText.textContent = "Quiz Complete!";
        }

        // Show detailed results
        function showDetailedResults() {
            const detailedResults = document.getElementById("detailedResults");
            const container = document.getElementById("answerReviewContainer");

            detailedResults.classList.toggle("hidden");

            if (!detailedResults.classList.contains("hidden")) {
                container.innerHTML = "";

                quizData.forEach((question, index) => {
                    const isCorrect = userAnswers[index] === question.correct;
                    const userAnswer = userAnswers[index];

                    const reviewDiv = document.createElement("div");
                    reviewDiv.className = `answer-review ${isCorrect ? "correct" : "incorrect"}`;

                    reviewDiv.innerHTML = `
                        <div class="review-question">
                            <span class="${isCorrect ? "status-correct" : "status-incorrect"}">
                                ${isCorrect ? "✓ CORRECT" : "✗ INCORRECT"}
                            </span>
                            Q${index + 1}: ${question.question}
                        </div>
                        <div class="review-answer">
                            Your answer: ${userAnswer !== null ? question.options[userAnswer] : "No answer selected"}<br>
                            Correct answer: ${question.options[question.correct]}
                        </div>
                        <div class="review-explanation">
                            💡 ${question.explanation}
                        </div>
                    `;

                    container.appendChild(reviewDiv);
                });
            }
        }

        // Restart the quiz
        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            quizStarted = false;
            quizCompleted = false;

            showPage("startScreen");

            // Reset progress bar
            progressBar.style.width = "0%";
            progressText.textContent = `0 / ${quizData.length}`;

            // Clear the name input for new player
            playerNameInput.value = "";
            currentPlayerName = "";

            // Hide detailed results
            document.getElementById("detailedResults").classList.add("hidden");
        }

        // Initialize the quiz when page loads
        document.addEventListener("DOMContentLoaded", function () {
            // Assign DOM elements to the variables
            startScreen = document.getElementById("startScreen");
            quizContainer = document.getElementById("quizContainer");
            resultsScreen = document.getElementById("resultsScreen");
            leaderboardScreen = document.getElementById("leaderboardScreen");
            progressBar = document.getElementById("progressBar");
            progressText = document.getElementById("progressText");
            questionNumber = document.getElementById("questionNumber");
            categoryBadge = document.getElementById("categoryBadge");
            questionText = document.getElementById("questionText");
            optionsContainer = document.getElementById("optionsContainer");
            prevBtn = document.getElementById("prevBtn");
            nextBtn = document.getElementById("nextBtn");
            playerNameInput = document.getElementById("playerName");

            // Reset any existing state
            currentQuestion = 0;
            userAnswers = [];
            quizStarted = false;
            quizCompleted = false;
            currentPlayerName = "";

            // Allow Enter key to start quiz
            playerNameInput.addEventListener("keypress", function (e) {
                if (e.key === "Enter") {
                    startQuiz();
                }
            });

            // Focus on name input
            playerNameInput.focus();
        });
    </script>
</body>
</html>
